CREATE DATABASE DB
GO
USE DB
GO
-- TAO BANG 
CREATE TABLE KHOA 
(
	MAKHOA VARCHAR(20),
	TENKHOA  NVARCHAR(30),
	NAMTL INT,
	PHONG NVARCHAR(5), 
	DIENTHOAI INT,
	TRUONGKHOA VARCHAR(10),
	NGAYNHANCHUC DATE

	CONSTRAINT PK_KHOA 
	PRIMARY KEY(MAKHOA)
)
CREATE TABLE GIAOVIEN
(
	MAGV VARCHAR(10),
	HOTEN NVARCHAR(30),
	LUONG MONEY,
	PHAI NVARCHAR(5),
	NGAYSINH DATE,
	DIACHI NVARCHAR(50),
	GVQLCM VARCHAR(10),
	MABM VARCHAR(10)

	CONSTRAINT PK_GIAOVIEN
	PRIMARY KEY (MAGV)
)
CREATE TABLE BOMON
(
	MABM VARCHAR(10),
	TENBM NVARCHAR(30),
	PHONG VARCHAR(10),
	DIENTHOAI INT,
	TRUONGBM VARCHAR(10),
	MAKHOA VARCHAR(20),
	NGAYNHANCHUC DATE

	CONSTRAINT PK_BOMON
	PRIMARY KEY(MABM) 
)

-- GIA TRI

INSERT INTO GIAOVIEN VALUES ('001',N'Nguyễn Hoài An', 2000,N'Nam','02/15/1973',N'25/3 Lạc Long Quân, Q.10, TP HCM',NULL,'MMT')
INSERT INTO GIAOVIEN VALUES ('002',N'Trần Trà Hương', 2500,N'Nam','06/20/1960',N'125 Trần Hưng Đạo ,Q.1, TP HCM',NULL,'HTTT')
INSERT INTO GIAOVIEN VALUES ('003',N'Nguyễn Ngọc Ánh', 2200,N'Nam','05/11/1975',N'12/21 Võ Văn Ngân Thủ Đức, TP HCM','002','HTTT')
INSERT INTO GIAOVIEN VALUES ('004',N'Trương Nam Sơn', 2300,N'Nam','06/20/1959',N'215 Lý Thường Kiệt,TP Biên Hòa',NULL,'VS')
INSERT INTO GIAOVIEN VALUES ('005',N'Lý Hoàng Hà', 2500,N'Nam','10/23/1954',N'22/5 Nguyễn Xí, Q.Bình Thạnh, TP HCM',NULL,'VLĐT')
INSERT INTO GIAOVIEN VALUES ('006',N'Trần Bạch Tuyết', 1500,N'Nam','05/20/1980',N'127 Hùng Vương,TP Mỹ Tho','004','VS')
INSERT INTO GIAOVIEN VALUES ('007',N'Nguyễn An Trung', 2100,N'Nam','06/05/1975',N'234 3/2,TP Biên Hòa',NULL,'HPT')
INSERT INTO GIAOVIEN VALUES ('008',N'Trần Trung Hiếu', 1800,N'Nam','08/06/1977',N'22/11 Lý Thường Kiệt, TP Mỹ Tho','007','HPT')
INSERT INTO GIAOVIEN VALUES ('009',N'Trần Hoàng Nam', 2000,N'Nam','11/22/1975',N'234 Trần Não ,An Phú , TP HCM','001','MMT')
INSERT INTO GIAOVIEN VALUES ('010',N'Pham Nam Thanh', 1500,N'Nam','12/12/1980',N'221 Hùng Vương, Q.5, TP HCM','007','HPT')

GO

INSERT INTO BOMON VALUES ('CNTT',N'Công nghệ tri thức','B15',0838126126,NULL,'CNTT',NULL)
INSERT INTO BOMON VALUES ('HHC',N'Hóa hữu cơ','B44',838222222,NULL,'HH',NULL)
INSERT INTO BOMON VALUES ('HL',N'Hóa lí','B42',0838878787,NULL,'HH',NULL)
INSERT INTO BOMON VALUES ('HPT',N'Hóa phân tích ','B43',0838777777,'007','HH','10/15/2007')
INSERT INTO BOMON VALUES ('HTTT',N'Hệ thống thông tin','B13',0838125125,'002','CNTT','09/20/2004')
INSERT INTO BOMON VALUES ('MMT',N'Mạng máy tính','B16',0838676767,'CNTT','001','05/15/2005')
INSERT INTO BOMON VALUES ('SH',N'Sinh hóa','B33',0838898989,NULL,'SH',NULL)
INSERT INTO BOMON VALUES ('VLDT',N'Vật lí điện tử','B23',0838234234,NULL,'VL',NULL)
INSERT INTO BOMON VALUES ('VLUD',N'Vật lí ứng dụng','B24',0838454545,'005','VL','02/18/2006')
INSERT INTO BOMON VALUES ('VS',N'Vi sinh','B32',0838909090,'004','SH','01/01/2007')

GO

INSERT INTO KHOA VALUES ('CNTT',N'Công nghệ thông tin', 1995,'B11',0838123456,'002','02/20/2005')
INSERT INTO KHOA VALUES ('HH',N'Hóa học', 1980,'B41',0838456456,'007','10/15/2005')
INSERT INTO KHOA VALUES ('SH',N'Sinh học', 1980,'B31',0838454545,'004','10/11/2005')
INSERT INTO KHOA VALUES ('VL',N'Vật lí', 1976,'B21',0838223223,'005','09/18/2005')

GO
--KHOA NGOAI
ALTER TABLE KHOA
ADD
	CONSTRAINT FK_KHOA_GIAOVIEN
	FOREIGN KEY(TRUONGKHOA) 
	REFERENCES GIAOVIEN
	

ALTER TABLE GIAOVIEN
ADD
	CONSTRAINT FK_GIAOVIEN_GIAOVIEN
	FOREIGN KEY(GVQLCM) 
	REFERENCES GIAOVIEN


ALTER TABLE GIAOVIEN
ADD	
CONSTRAINT FK_GIAOVIEN_BOMON
	FOREIGN KEY(MABM) 
	REFERENCES BOMON


ALTER TABLE BOMON
ADD
	CONSTRAINT FK_BOMON_KHOA
	FOREIGN KEY(MAKHOA) 
	REFERENCES KHOA
	
ALTER TABLE BOMON
ADD
	CONSTRAINT FK_BOMON_GIAOVIEN
	FOREIGN KEY(TRUONGBM) 
	REFERENCES GIAOVIEN






